<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Teacher — Attendance</title>
<link rel="stylesheet" href="/assets/styles.css">
</head>
<body>
<div class="container">
<header class="card">
<h2>Teacher — Attendance</h2>
<div>
<button id="logout">Logout</button>
<button id="openScanner">Open Scanner</button>
</div>
</header>


<div class="card">
<h3>Today's Attendance</h3>
<div id="todayList">Loading...</div>
</div>


<div class="card">
<h3>All Students</h3>
<div id="studentList">Loading...</div>
</div>


</div>


<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js"></script>
<script src="/assets/app.js"></script>
<script>
const logoutBtn = document.getElementById('logout');
const openScanner = document.getElementById('openScanner');
const todayList = document.getElementById('todayList');
const studentList = document.getElementById('studentList');


logoutBtn.addEventListener('click', async () => { await signOut(); window.location.href = '/'; });
openScanner.addEventListener('click', () => window.open('/scan.html', '_blank'));


const today = new Date().toISOString().split('T')[0];


// load students
db.collection('students').orderBy('studentId').onSnapshot(snap => {
studentList.innerHTML = '';
snap.forEach(doc => {
const d = doc.data();
const div = document.createElement('div');
div.className = 'student-item';
div.id = 'row-' + d.studentId;
div.innerHTML = `<span>${d.studentId} — ${d.name}</span><span id='status-${d.studentId}' class='absent'>Absent</span>`;
studentList.appendChild(div);
});
});


// load today's attendance
</html>
